v3.6.2
=======

Release date: 4/9/2019

.. IMPORTANT:: As of v3.6.2 Ubuntu 14.04 is no longer supported for Docker Hosts OS due to Docker version upgrade to address CVE-2019-5736. Existing Morpheus Docker Hosts running on 14.04 will not be able to upgrade to latest Morpheus Agent version. All new Morpheus Docker hosts using Ubuntu require Ubuntu 16.04 or 18.04.

New Features
------------

- Analytics: Completely revamped Analytics section that expands available metrics, filtering and flexibility.
- Ansible: Live std out of Ansible execution added to instance history
- Ansible: Ansible Group field added to Edit Instance Modal for Instances in Groups scoped to Ansible
- Ansible: Command Bus Execution times improved up to 40%
- API: A Master Tenant Multitenant User Role can now be used when creating Subtenant Users
- API: Additional validation added for Instance and App creation
- API: ownerId added to ``/api/zones/list``
- API: UUID added to Clouds, Instances, Hosts, Apps, Groups, Containers for ``/api/billing`` reference
- Appliance: ``ntp['enable'] = false`` option added for ``/etc/morpheus/morpheus.rb``
- AWS: Application Load Balancer sync added
- AWS: Elastic Load Balancer sync added
- AWS: S3 bucket syncing added
- AWS: Scale groups now supported
- AWS: Security Group syncing added
- AWS: Subnet creation and deletion added
- AWS: VPC creation and deletion added
- AWS: Security Groups now filter by VPC selection during provisioning
- Azure: Costs & Reservations sync added
- CloudFormation: Added "Apply State" action to apply updates to a Cloud Formation stack
- CloudFormation: VPC's and Subnets created from CloudFormation Blueprints are now created in Morpheus
- Docker: Added support for Docker Host provisioning on Ubuntu 18.04
- Docker: Removed support for Docker Host provisioning on Ubuntu 14.04
- Docker: Updated the version of docker installed on docker hosts from 1.12.6 to 18.09.3
  .. IMPORTANT:: The Docker v18.09.3 upgrade addresses CVE-2019-5736. Docker v18.09.3 does not support Ubuntu 14.04. Existing Morpheus Docker Hosts running on 14.04 will not be able to upgrade to the latest Morpheus Agent version, as the host Docker version will be upgraded to v18.09.3 upon Agent upgrade. All new Morpheus Docker hosts using
- Google Cloud: Added public image syncing
- Hosts: Windows Server option added to ``+ BARE METAL`` action
- Infoblox: "Inventory Existing" flag added to enabled/disable sync of host and zone records
- Infoblox: Zone filter added to filter Zones/Domains synced from Infoblox
- Instances: Sync restore status added
- Library: Instance Types and Layouts now filter by user role permissions
- Library: Ubuntu 18.04 VMware Layout and Node Type added to system Ubuntu Instance Type
- Load Balancers: AD Authentication added for F5 Integrations
- Nutanix: Fix for cloning Instances with 1 TB+ storage
- Operations: New Budgets section
- Plans: Group access settings added
- Policies: Workflow Policy type added
- Pricing: CAD currency added
- Provisioning: ``${app.name}``, ``${customOptions.}`` and ``${instance.instanceContext}`` variables now evaluated in review pane
- Provisioning: Cloning wizard updated to match provisioning configuration options.
- Roles: "Integrations: Ansible" permission added
- Roles: "Operations: Activity" permission added
- Roles: "Operations: Budgets" permission added
- SCVMM: Hosts selection no longer required
- SCVMM: Generation selection moved from Provisioning modals to Virtual Image settings
- SCVMM: Hypervisor Console added (beta)
- Storage: Delete confirmation modal w/ validation added when deleting Storage Buckets
- Tasks: Local Shell Script task type added w/ git repo Integration option
- Tasks: Task Results added. Allow Tasks to use the output from preceding Tasks in the same Workflow via results variables. Single Value, Key/Value Pairs, and JSOn results types. Output is stored in ``<%=results.taskCode%>`` or ``<%=results["Task Name"]%>`` variables.
- Tenants: CAD currency added
- UI: "Services" tabs renamed to "Integrations"
- vCloud Director: Additional error messages displayed upon provisioning failure
- vCloud Director: Discovered server usage tracking added
- vCloud Director: Plan matching added for Discovered Servers
- Virtual Images: Ubuntu 18.04 vmdk system image added
- VMware: Windows VM auto-resolution added for Hypervisor Console
- VMware: Networks now filter by cluster during provisioning when cloud is scoped to all clusters


Fixes
-----

- Ansible: Fix for running playbooks from Ansible Integrations section
- Apps: Fix for ${App.name} not showing correct value in the Review App section
- Apps: Fix for Instance configurations get reset when going back from the REVIEW page
- AWS: Fix for detecting ip address changes during provisioning due to EIP assignment
- Backups: Fix for backups associated with an Instance not moving to subtenant when the Instance is assigned - to a subtenant
- Backups: Fix for recent backups failures entries and deletion
- Backups: Fix for snapshot retention when "Archive Snapshots" is disabled on target Storage Provider
- Blueprints: Fix for sub-tenants not able to set blueprint access when custom access has been set at the - master tenant level for blueprints.
- CLI: Fix for morpheus groups use command error when not using morpheus shell
- CLI: Fix for morpheus instances add using Nutanix Instance Types
- CLI: Fix for missing field prompts in morpheus apps add $name --blueprints
- Commvault: Fix for Backup deletion handling
- Commvault: Fix for cloning a synced job
- Commvault: Fix for Sub-Tenants using Commvault Integration shared form Master Tenant
- Console: ctl-alt-delete restart warning dialog no longer displayed for Windows vm's
- GCP: Fix for image selection when creating Google Node Types
- HA: Fix for mysql read-only and auto-commit locks when using external mysql failover configurations
- Health: Updates to Appliance Health: System Memory Usage accuracy
- Hosts: Fix for converting to managed using key instead of username/password
- Instances: Fix for core count updated after reconfigured Instances that were converted to managed
- KVM: Fix for cloning kvm hosts
- NSX: Fix for creating NSX Integration from ``Administration - Integrations``
- Nutanix: Fix for cloud-init iso upload for docker host provisioning
- Nutanix: Fix for duplicate Virtual Images
- OpenStack: Fix for reconfiguring Host and VM's from Infrastructure - Hosts
- Option Types: source_url length increased to from 255 to 1000
- OTC & Huawei: Fix for Backups: Restore to New
- OTC: Fix for Cloning instances
- Plans & Pricing: Fix for price plans assigned to sub-tenant hidden from master tenant in ui
- Plans & Pricing: Price Sets and Price tabs now hidden for sub-tenants
- SCVMM: Fix for unattend and iso cleanup
- SCVMM: Fix for Gen 2 Provisioning issue caused by hardware profile
- Tenants: Fix for Tenant delete error due to missing storage_group_storage_volume
- Tenants: Fix for Users paging issue
- UI: Fix for Hosts pagination removing filters
- vCD: /api removed from new cloud wizard placeholder text
- vCD: Fix for adding network adapter during reconfigure
- vCD: Fix for Inventory Existing when 50-100 vapps exist in target vCD
- vCD: Fix for inventory issues (instances not showing storage and aren't getting tied to correct plans)
- VCD: Fix for stop/start Instance not updating usage records
- VCD: Fix for Discovery vDC scoping.
- VIO: Fix for Backups created in qcow2 format
- Veeam: Fix for service hidden from UI when disabled
- VMware: Fix for blank hypervisor console displaying for certain Windows VM resolutions
- VMware: Fix for restoring a VMware backup after deleting associated Instance
- VMware: Fix for issue where incorrect thin/thick provision spec was applied

Appliance Package Version Updates
---------------------------------

- commons-fileupload 1.3.2
- commons-httpclient 3.1
- gettext 0.19.8.1
- jsch 0.1.53
- jackson-databind 2.8.10
- lucene-queryparser 6.6.1
- myqsl-connector-java 5.1.33
- spring-security-web 4.2.3
- spring-amqp 1.7.4
- spring-websocket 4.3.7
- spring-security-oauth2 2.0.14
- spring-core 4.3.12
- spring-web 4.3.12
- spring-webmvc 4.3.12
- spring-messaging 4.3.7
- tomcat-embed-core 8.5.23
- tomcat-util-scan 8.0.36
