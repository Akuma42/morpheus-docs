v3.6.2
=======

Release date:

.. IMPORTANT:: As of |morpheus| v3.6.2 Ubuntu 14.04 is no longer supported for Docker Hosts OS due to Docker version upgrade to address CVE-2019-5736. Existing Morpheus Docker Hosts running on 14.04 will not be able to upgrade to latest Morpheus Agent version. All new Morpheus Docker hosts using Ubuntu require Ubuntu 16.04 or 18.04.


New Features
------------

- Analytics: Completely revamped Analytics section that expands available metrics, filtering and flexibility.
- API: A Master Tenant Multitenant User Role can now be used when creating Subtenant Users
- API: ownerId added to ``/api/zones/list``
- API: Additional validation added for Instance and App creation
- API: UUID added to Clouds, Instances, Hosts, Apps, Groups, Containers for /billing reference
- Appliance: ``ntp['enable'] = false`` option added for /etc/morpheus/morpheus.rb
- AWS: Application Load Balancer sync
- AWS: Elastic Load Balancer sync
- AWS: S3 bucket syncing
- AWS: Scale groups now supported
- AWS: Security Group syncing
- AWS: Subnet creation and deletion
- AWS: VPC creation and deletion
- Azure: Costs & Reservations sync added
- CloudFormation: Added "Apply State" action to apply updates to a Cloud Formation stack
- CloudFormation: VPC's and Subnets created from CloudFormation Blueprints are now created in Morpheus
- Docker: Added support for Docker Host provisioning on Ubuntu 18.04
- Docker: Removed support for Docker Host provisioning on Ubuntu 14.04
- Docker: Updated the version of docker installed on docker hosts from 1.12.6 to 18.09.3
    .. IMPORTANT:: The Docker v18.09.3 upgrade addresses CVE-2019-5736. Docker v18.09.3 does not support Ubuntu 14.04. Existing Morpheus Docker Hosts running on 14.04 will not be able to upgrade to the latest Morpheus Agent version, as the host Docker version will be upgraded to v18.09.3 upon Agent upgrade. All new Morpheus Docker hosts using
- Google Cloud: Added public image syncing
- Infoblox: Zone filter added to filter Zones/Domains synced from Infoblox
- Infoblox: "Inventory Existing" flag added to enabled/disable sync of host and zone records
- Instances: Sync restore status added
- Library: Ubuntu 18.04 VMware Layout and Node Type added to system Ubuntu Instance Type
- Library: Instance Types and Layouts now filter by user role permissions
- Nutanix: Fix for cloning Instances with 1 TB+ storage
- Operations: New Budgets section
- Policies: Workflow Policy type added
- Plans: Group access settings added
- Pricing: CAD currency added
- Provisioning: Cloning wizard updated to match provisioning configuration options.
- Provisioning: ${app.name}, ${customOptions.} and ${instance.instanceContext} variables now evaluated in review pane
- Roles: "Integrations: Ansible" permission added
- Roles: "Operations: Activity" permission added
- Roles: "Operations: Budgets" permission added
- Storage: Delete confirmation modal w/ validation added when deleting Storage Buckets
- SCVMM: Hypervisor Console added (beta)
- SCVMM: Hosts selection no longer required
- Tasks: Local Shell Script task type added w/ git repo Integration option
- Tasks: Task Results added. Allow Tasks to use the output from preceding Tasks in the same Workflow via results variables. Single Value, Key/Value Pairs, and JSOn results types. Output is stored in ``<%=results.taskCode%>`` or ``<%=results["Task Name"]%>`` variables.
- Tenants: CAD currency added
- UI: "Services" tabs renamed to "Integrations"
- Virtual Images: Ubuntu 18.04 vmdk system image added
- vCloud Director: Additional error messages displayed upon provisioning failure
- vCloud Director: Plan matching added for Discovered Servers
- vCloud Director: Discovered server usage tracking added
- VMware: Networks now filter by cluster during provisioning when cloud is scoped to all clusters


Appliance Package Updates
-------------------------

- commons-fileupload 1.3.2
- commons-httpclient 3.1
- gettext 0.19.8.1
- jsch 0.1.53
- jackson-databind 2.8.10
- lucene-queryparser 6.6.1
- myqsl-connector-java 5.1.33
- spring-security-web 4.2.3
- spring-amqp 1.7.4
- spring-websocket 4.3.7
- spring-security-oauth2 2.0.14
- spring-core 4.3.12
- spring-web 4.3.12
- spring-webmvc 4.3.12
- spring-messaging 4.3.7
- tomcat-embed-core 8.5.23
- tomcat-util-scan 8.0.36

Fixes
-----

- AWS: Fix for detecting ip address changes during provisioning due to EIP assignment
- Tenants: Fix for Users paging issue
- Ansible: Fix for running playbooks from Ansible Integrations section
- CLI: Fix for missing field prompts in ``morpheus apps add $name --blueprints``
- CLI: Fix for ``morpheus groups use`` command error when not using ``morpheus shell``
- CLI: Fix for ``morpheus instances add`` using Nutanix Instance Types
- Apps: Fix for ${App.name} not showing correct value in the Review App section
- Apps: Fix for Instance configurations get reset when going back from the REVIEW page
- Backups: Fix for snapshot retention when "Archive Snapshots" is disabled on target Storage Provider
- Backups: Fix for recent backups failures entries and deletion
- Backups: Fix for backups associated with an Instance not moving to subtenant when the Instance is assigned to a subtenant
- Blueprints: Fix for sub-tenants not able to set blueprint access when custom access has been set at the master tenant level for blueprints.
- Commvault: Fix for Sub-Tenants using Commvault Integration shared form Master Tenant
- Commvault: Fix for cloning a synced job
- Commvault: Fix for Backup deletion handling
- Health: Updates to Appliance Health: System Memory Usage accuracy
- Instances: Fix for core count updated after reconfigured Instances that were converted to managed
- Storage: Fix for Dell Isilon/ECS ``+`` button on IP-related fields when editing file share
- GCP: Fix for image selection when creating Google Node Types
- GCP: Fix for provisioning private images
- HA: Fix for mysql read-only and auto-commit locks when using failover morpheus.rb configurations
- UI: Fix for Hosts pagination removing filters
- KVM:  Fix for cloning kvm hosts
- NSX: Fix for deleting NSX integrations
- Nutanix: Fix for cloudinit iso upload for docker host provisioning
- OpenStack: Fix for reconfiguring Host and VM's from Infrastructure - Hosts
- Option Types: source_url length increased to from 255 to 1000
- OTC: Fix for Cloning instances
- OTC/Huawei: Fix for Backups: Restore to New
- SCVMM: Fix for unattend and iso cleanup
- Tenants: Fix for Tenant delete error due to missing ``storage_group_storage_volume``
- Plans & Pricing: Price Sets and Price tabs now hidden for sub-tenants
- Plans & Pricing: Fix for price plans assigned to sub-tenant hidden from master tenant in ui
- Console: `ctl-alt-delete` restart warning dialog no longer displayed for Windows vm's
- vCD: ``/api`` removed from new cloud wizard placeholder text
- vCD: Fix for adding network adapter during reconfigure
- VCD: Fix for stop/start Instance not updating usage records
- vCD: Fix for inventory issues (instances not showing storage and aren't getting tied to correct plans)
- vCD: Fix for Inventory Existing when 50-100 vapps exist in target vCD
- Veeam: Fix for service hidden from UI when disabled
- VMware: Fix for restoring a VMware backup after deleting associated Instance
- Hosts: Fix for converting to managed using key instead of username/password
